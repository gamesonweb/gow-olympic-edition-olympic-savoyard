<h1 align="center">â„ï¸ SKI ALPIN â›·ï¸</h1>
<p align="center">
  
  <img src="https://github.com/gamesonweb/gow-olympic-edition-olympic-savoyard/assets/115253780/b7a4b48d-c540-494d-912b-82852d4ee94d" alt="cover" width="1000"/>
  <img src="https://github.com/gamesonweb/gow-olympic-edition-olympic-savoyard/assets/115253780/f251e8a9-4530-4606-b7d1-38e8d04f1907" alt="ingame" width="1000"/>
  <img src="https://github.com/gamesonweb/gow-olympic-edition-olympic-savoyard/assets/115253780/8be712a5-f575-42fc-96b7-a8ba44bb353a" alt="leaderboard" height="400"/>
  <img src="https://github.com/gamesonweb/gow-olympic-edition-olympic-savoyard/assets/115253780/7717dbe3-2dd6-4129-b821-6a23a4677788" alt="mobile" height="400">
</p>

### ğŸ”ï¸ Plongez au cÅ“ur des montagnes enneigÃ©es !

DÃ©couvrez une piste de ski crÃ©Ã©e avec soin, entourÃ©e de montagnes majestueuses, d'arbres enneigÃ©s, et de rochers. 

### â›·ï¸ğŸš©â±ï¸ Slalomez entre les drapeaux sans erreur pour obtenir le meilleur chrono !

**Suivez la ligne bleue** pour passer les drapeaux sans pÃ©nalitÃ©. 

**AccÃ©lÃ©rez, freinez, et virez Ã  toute vitesse** pour finir le parcours le plus rapidement possible. 

**Chaque drapeau manquÃ© ajoute 10 secondes** Ã  votre temps â€“ visez la perfection pour dÃ©crocher la mÃ©daille d'or!

### ğŸ”ŠğŸ§ Sentez la glisse !

Ã‰coutez le vent siffler, la neige crisser sous vos skis, et les cloches savoyardes rÃ©sonner alors que vous dÃ©valez la pente Ã  toute allure!

**Jouez avec un casque pour une expÃ©rience maximale.**

### ğŸ¥‡ Arriverez vous Ã  terminer 1er au Slalom Olympique ?

<br/>

## Ã€ vos marques, prÃªts, partez! ğŸ

### [Jouez sur **PC ğŸ’»âŒ¨ï¸ et mobile ğŸ“±**](https://dezarnaud-julian.github.io/)

Vous pouvez aussi lancer le jeu sur mobile en scannant ce QR Code :

<img src="https://github.com/gamesonweb/gow-olympic-edition-olympic-savoyard/assets/115253780/190b2b02-55d5-4659-8ca8-7dec89aa54ef" alt="qrcode" width="200"/>

### [VidÃ©o de 30 secondes de Gameplay](https://youtu.be/fGPHrEuFtO4)

### [Code source](https://github.com/Dezarnaud-Julian/OlympicSavoyard)

### [Repo du site web](https://github.com/Dezarnaud-Julian/dezarnaud-julian.github.io)

## ContrÃ´les âŒ¨ï¸ ğŸ“±
Prenez le contrÃ´le de votre skieur avec des commandes simples.

![image](https://github.com/gamesonweb/gow-olympic-edition-olympic-savoyard/assets/115253780/c801675b-97ea-4f2f-87cf-b27759bd05f4)

Pour jouer en plein Ã©cran, clickez sur le bouton rouge en haut Ã  droite de l'Ã©cran.

### Mode dâ€™emploi sur ordinateur âŒ¨ï¸

- **FlÃ¨che du haut** : Sprinter / DÃ©marrer la course
- **FlÃ¨che du bas** : Chasse-Neige (Freiner)
- **FlÃ¨che de gauche** : Tourner Ã  gauche
- **FlÃ¨che de droite** : Tourner Ã  droite

### Mode dâ€™emploi sur mobile ğŸ“±

- **Glisser le doight vers le haut** : Sprinter / DÃ©marrer la course
- **Glisser le doight vers le bas** : Chasse-Neige (Freiner)
- **Glisser le doigt vers la gauche** : Tourner Ã  gauche
- **Glisser le doigt vers la droite** : Tourner Ã  droite

Jouez en mode portrait ou paysage !

Pour avoir une meilleure experience, **vous pouvez installez un raccourci du jeu sur votre mobile** :

Cliquez sur les 3 petits points en haut Ã  droite de votre navigateur > Ajouter en raccourci / Add to home screen

<img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fsupport.startpage.com%2Fhc%2Farticle_attachments%2F6738385280020%2FScreenshot_20220603-095113.jpeg&f=1&nofb=1&ipt=97a250a51d63ba43d3e9fe40050bb28948e4a2ff4858111eaf397eeaf473c1f2&ipo=images" alt="drawing" width="200"/>

## Equipe ğŸ§

Julian Dezarnaud, SI4 Polytech Nice-Sophia, Valbonne

## Description du developpement ğŸ‘¨â€ğŸ’»

Je fais mes Ã©tudes dans le Sud. Mais je suis originaire de Savoie et fier de lâ€™Ãªtre ! Alors quand jâ€™ai entendue le mot Olympic, jâ€™ai tout de suite pensÃ© aux jeux Olympiques dâ€™Hiver ! Je me suis donc penchÃ© vers le slalom !

### ProblÃ©matiques & features

#### CrÃ©er la base du site âš›ï¸

- Babylon.js pour la 3D
- React pour la UI (User Interface) 2D.

Je suis parti dâ€™un project React CRA (Create react App), un outil qui crÃ©e un site web vide React prÃªt Ã  lâ€™emploi en Typescript. Dedans jâ€™ai rajoutÃ© le framework Babylon pour permettre la crÃ©ation du jeu en 3D.

#### GÃ©nÃ©rer un parcours de slalom ğŸš©

Le parcours de ski est gÃ©nÃ©rÃ© de maniÃ¨re procÃ©durale en se basant sur des courbes sinusoÃ¯dales pour reprÃ©senter au mieux une descente Ã  ski. Les boosters et les drapeaux sont placÃ©s le long de ce parcours en fonction de cette sinusoÃ¯de, permettant au joueur de les atteindre de maniÃ¨re rÃ©aliste et rÃ©alisable. J'utilise la tangeante de la courbe pour savoir quand placer un drapeau. Le slalom de ce jeu enchaÃ®ne donc plusieurs sinusoidales diffÃ©rentes pour changer le parcours.

Exemple :

- 1Ã¨re partie du slalom : `(x) => Math.sin(x \* 0.01)`
- DernÃ¨re partie : `(x) => Math.sin(x \* 0.03) \* 0.2 + Math.sin(x \* 0.01)`

#### Avoir des physiques de jeu fun et intÃ©ressantes â›·ï¸

Au dÃ©part je voulais me rapprocher de quelque-chose de naturel et jâ€™ai donc rÃ©alisÃ© une piste penchÃ©e et utilisÃ© la gravitÃ© comme force de descente. Mais j'ai rencontrÃ© des problÃ¨mes au niveau de la camÃ©ra qui avait du mal Ã  suivre le joueur et au niveau des forces Ã  appliquer pour gÃ©rer le freinage et surtout pour tourner. Je suis donc revenu Ã  un terrain plat.

Des multiplicateurs de vitesse pour tourner / avancer sont calculÃ©s en fonction de la position du joueur : Si le joueur s'accroupie pour sprinter, le multiplcateur de vitesse augemente au dessus de 1, au contraire il descends en dessous si le joueur freine. Le multiplicateur de vitesse de direction s'adapte Ã©galement et est Ã  1 quand le joueur ne fait rien. S'accroupir pour sprinter ou freiner pÃ©nalise le joueur dans son tournant afin de l'obliger Ã  utiliser tous les mouvements pour rÃ©ussir au mieux son parcours.

#### ChronomÃ¨tre et pÃ©nalitÃ©s â±ï¸âŒ

Vous pouvez voir en temps rÃ©el votre vitesse et le temps actuel de votre parcours avec et sans les pÃ©nalitÃ©s (+10 sec par drapeau ratÃ©). Le chronomÃ¨tre est gÃ©rÃ© par une classe typescript qui comptailise Ã©galement les pÃ©nalitÃ©s.
On sait si le joueur passe correctement ou pas le drapeau en fonction de sa position en X.

#### Une camera fonctionnelle et stable d'ordinateurs en ordinateur ğŸ¥

La camÃ©ra de Babylon ne se comportait pas pareil suivant les ordinateurs. Elle Ã©tait soit trop loin, soit trop proche. Parfois mÃªme mal cadrÃ©e. Aec lâ€™aide de Michel Buffa j'ai compris qu'il fallait Ã©couter l'Ã©vnÃ¨nement window resize pour dir Ã  l'engine de se retailler correctement. J'ai aussi bin fait attention Ã  ce que le canvas change bien sa taille selon la rÃ©solution des Ã©crans

#### Avoir une physique stable ğŸ“Š

Avoir une physique constante d'ordinateur en ordinateur a Ã©tÃ© trÃ¨s compliquÃ© et je ne suis pas tout Ã  fait sÃ»r que ce soit totalement stabilisÃ© aujourd'hui ! Jâ€™ai remarquÃ© que suivant les machines le skieur allait plus vite ou moins vite, cassant complÃ¨tement le jeu puisque le but est de rÃ©aliser le meilleur chrono (qui lui reste stable car j'utilise des intervales en javascript) ! J'ai ajoutÃ© une boucle de rendu de la physique qui est appellÃ©e sur un `onBeforeStepObservable` de la scene + rajoutÃ© un time step sur le plugin de physique Havok + AjoutÃ© des options dans l'engine `{deterministicLockstep: true, lockstepMaxSteps: 1}`. Malheuresement ce problÃ¨me ne semble pas Ãªtre totalement rÃ©solu.. Si vous avez une solution Ã  ce problÃ¨me je suis preneur !

#### Optimiser le chargement de meshs et materiels â™»ï¸

Pour la gÃ©nÃ©ration de la piste de slalom j'avais fait l'erreur de charger un mesh de drapeau Ã  chaque fois que je devait poser un drapeau. Tous mes meshs/materials sont maintenant chargÃ©s/crÃ©es une fois, enregistrÃ©s en chache dans un variable et clonÃ©s lors de l'utilisation.

#### Optimiser le chargement du dÃ©cor ğŸ‘

GÃ©nÃ©rer tout une forÃªt en utilisant des meshs classiques dÃ©pense vite des resources. Vu que ces dÃ©cors sont non interactifs et ne bougent pas j'ai voulu amÃ©liorer les perfs en utilisant le systÃ¨me d'instances. Elles me permettes de dÃ©placer la charge de travail sur la carte graphique plutÃ´t que sur le CPU. Je n'ai pas pris le temps de crÃ©er des ThinInstances, qui semblent encore plus optimisÃ©s et adaptÃ©s Ã  mon cas.

#### Doser la difficultÃ©e du jeu ğŸšï¸

Trouver un niveau de difficultÃ©e qui aille Ã  tout le monde est compliquÃ©, surtout que je voulais que ce jeu soit accessible Ã  tous mais dans lequel il y aie un grand niveau de progression pour devenir un pro de la glisse ! Je pense qu'aujourd'hui le jeu est relativement accessible, un joueur arrivera Ã  s'approcher du podium sans trop de problÃ¨me, il faudra plus d'efforts pour obtenir la premiÃ¨re place en revanche !

#### Gestion du travail ğŸ‘·

Je ne peux pas parler de gestion de la charge de travail et de lâ€™Ã©quipe, car je suis seul Ã  rÃ©aliser ce projet. NÃ©anmoins je remercie mes amis dâ€™avoir testÃ© mon jeu Ã  maintes reprises pour me donner des conseils dâ€™Ã©quilibrage !

#### Gestion des sons ğŸ”Š

Je voulais reprÃ©senter au mieux cette sensation de glisse qui mâ€™est chÃ¨re ! Pour ce faire j'ai vraiment travaillÃ© tous les sons qui composent le jeu. Le bruit de vent en fond deviens plus ou moins fort selon la vitesse du joueur, de mÃªme pour le bruit de neige qui crÃ©pite. De maniÃ¨re gÃ©nÃ©rale j'utilise le changement de vitesse du joueur pour augmenter ou diminuer le volume des sons. Le bruit de vent quand on passe prÃ¨s d'un drapeau est aussi proportionnel Ã  la vitesse et la rpoximitÃ© avec celui-ci.

#### Animer le personnage â›·ï¸

Je ne trouvais pas de modÃ¨le de skieur intÃ©ressant et je ne me sentais pas de le faire sur blender. J'ai donc rÃ©alisÃ© le personnage Ã  base de primitifs (cube, cylindre et sphere). Cela m'a permis de crÃ©er les animations du personnage procÃ©duralement, car jâ€™ai pu tourner/dÃ©placer chaque partie du corps et le skis indÃ©pendamment en fonction de la vitesse du joueur et de ses dÃ©placements. Cela permet vraiment d'avoir des rotations fluides et qui correspondent Ã  ce que le joueur est en train de faire sur la piste.

#### Le fun de taper les drapeaux ğŸš©

Les drapeaux se penchent plus ou moins fort quand on les touche suivant la vitesse et la distance avec eux. Donc au lieu dâ€™une animation statique ont a quelque-chose en fonction de la vitesse encore une fois.

#### CrÃ©er la UI ğŸ’»

Jâ€™ai utilisÃ© React car jâ€™aime bien ce Framework et jâ€™ai lâ€™habitude de lâ€™utiliser. Comme je voulais faire une UI en 2D jâ€™ai regardÃ© si je pouvais combiner React et Babylon. Cela nâ€™a pas Ã©tÃ© trÃ¨s Ã©vident au dÃ©but mais Ã  prÃ©sent je peux utiliser ce que je connais en React pour rÃ©aliser la UI. La UI sâ€™abonne Ã  un objet Game (une classe typeScript) et il va utiliser les objets Ã  lâ€™intÃ©rieur pour avoir le chrono, le temps courant du chrono, la vitesse, lâ€™Ã©tat du jeu (la course est finie ou non) pour ainsi afficher le panneau de tuto ou de fin.

#### HÃ©berger le jeu ğŸ®

Pour le hosting jâ€™ai utilisÃ© ce que propose Git car câ€™Ã©tait gratuit, simple et pratique. Jâ€™ai juste eu Ã  mettre le site web buildÃ© directement sur un rÃ©po qui a le mÃªme nom que mon username.

#### Terrain bosselÃ© â›°ï¸

Jâ€™ai regardÃ© pour faire des terrains dynamique avec des bosses et autre mais câ€™Ã©tait trop compliquÃ© dans le temps imparti que j'allouais au projet. Son utilisation allait aussi changer grandement les physiques de mon personnages, j'ai donc vite Ã©cartÃ© cette piste et dÃ©cidÃ© de rester simple.

#### Version mobile (optimisation et contrÃ´les) ğŸ“±

Pour la version mobile, afin dâ€™optimiser et fluidifier le jeu, jâ€™enlÃ¨ve beaucoup de modÃ¨les dÃ©coratifs comme les arbres, rocher et panneaux. J'ai dÃ» aussi adapter ma classe de ContrÃ´les pour permettre de contrÃ´ler le personnage via des inputs retournant des valeurs continues plutÃ´ts que des valeurs discrÃ¨tes comme sur clavier.
J'ai dÃ» aussi porter une attention particuliÃ¨re Ã  la UI pour faire en sorte qu'elle s'affiche correctement sur mobile et Ã©viter des problÃ¨mes d'overscrolling / textes selectionnÃ©s pour les copier grÃ¢ce au CSS.

#### Skybox ğŸŒ„

J'ai utilisÃ© un script python trouvÃ© sur le net pour adapter une skybox qui me plaisait bien au format accaptÃ© par babylon (une skybox dÃ©coupÃ© par faces plutÃ´t qu'une grand image simple).

#### Particules â„ï¸

J'ai utilisÃ© le playground de babylon pour crÃ©er mon systÃ¨me de particules en live. Une fois satisfait de mon systÃ¨me, je l'ai sauvegardÃ© au format json et chargÃ© dans mon code via le json importer pour les particule systems.

### Ressources ğŸ§°

- Outils :

  - Blender (pour la 3D)
  - Photopea (pour la rÃ©alisation de graphismes)
  - Audacity (pour Ã©diter des sons)

- Sons (Fressound) :

  - [bruit de ski sur neige](https://freesound.org/people/Nox_Sound/sounds/612662/)
  - [cloches](https://freesound.org/people/hoersturz/sounds/60514/)
  - [applaudissements_1](https://freesound.org/people/mglennsound/sounds/678542/)
  - [applaudissements_2](https://freesound.org/people/kevp888/sounds/735278/)
  - [boost](https://freesound.org/people/JomelleJager/sounds/248210/)
  - [erreur](https://freesound.org/people/F.M.Audio/sounds/662346/)
  - [chrono dÃ©but/fin](https://freesound.org/people/micadoe/sounds/178713/)
  - [vent prÃ¨s des drapeaux](https://freesound.org/people/Josethehedgehog/sounds/390367/)
  - [drapeau touchÃ©](https://freesound.org/people/EdgardEdition/sounds/113634/)

- ModÃ¨les 3D (Sketchfab):

  - [sapin sur sketchfab](https://sketchfab.com/3d-models/low-poly-pine-tree-c1d140fc15bd40928989d0ca79365e13)
  - [rochers sur sketchfab](https://sketchfab.com/3d-models/low-poly-rocks-9823ec262054408dbe26f6ddb9c0406e)
  - le reste est crÃ©e Ã  la main sur blender
